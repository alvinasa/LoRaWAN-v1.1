例子是LoRaWAN规范的信息说明，但它们不是正式规范的一部分。

# 19.1 确认数据信息的上行链路时序图

下图说明了终端设备尝试传输两个确认数据帧（Data0和Data1）的步骤。此设备的NbTrans参数必须大于或等于2，这样此示例才是有效的（因为第一次确认的帧传输了两次）

![](/assets/Figure 67: Uplink timing diagram for confirmed data messages.png)

终端设备首先在任意时刻和任意频道上发送一个包含Data0有效载荷的确认数据帧。帧计数器Cu通过将1加到先前的上行链路帧计数器而简单地派生。网络接收帧，并使用终端设备的第一个接收窗口生成一个下行帧，其ACK位在1秒钟后刚好设置为RECEIVE\_DELAY。该下行链路帧使用与Data0上行链路相同的数据速率和相同的信道。下行链路帧计数器Cd也通过将1加到朝向该特定终端设备的最后下行链路而派生。如果没有下行链路有效载荷，则网络将生成没有有效载荷的帧。在这个例子中，没有收到携带ACK位的帧。

如果终端设备在上行链路传输紧后的两个接收窗口之一中没有接收到设置了ACK位的帧，则它可以在第二接收窗口之后至少ACK\_TIMEOUT秒再次发送具有相同有效载荷和帧计数器的相同帧。这个重新发送必须在另一个信道上完成，并且必须像任何其他正常的传输一样遵守占空比限制。如果此时终端设备在其第一个接收窗口期间接收到ACK下行链路，只要ACK帧被解调，终端设备就可以在新信道上自由发送新帧。

本例中的第三个ACK帧也携带应用负载。下行链路帧可以携带ACK，MAC控制命令和有效载荷的任意组合。

# 19.2 确认数据消息的下行链路时序图

下图说明了“确认”下行链路的基本顺序。

![](/assets/Figure 68: Downlink timing diagram for confirmed data messages.png)

帧交换由终端设备发起，在信道A上发送“未经确认”的应用负载或任何其他帧。网络使用下行链路接收窗口在同一信道A上向终端设备发送“已确认”数据帧，当接收到需要确认的数据帧时，终端设备根据自己的判断传送一个ACK位置1的帧。该帧还可能包含捎带的数据或MAC命令作为其有效载荷。该ACK上行链路被视为与任何标准上行链路一样，并且因此在可能不同于信道A的随机信道上传输。

























