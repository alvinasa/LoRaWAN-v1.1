# 1 介绍

本文档介绍了LoRaWAN™网络协议，该协议针对电池供电而优化，这些终端设备可能是移动的或安装在固定位置。

LoRaWAN网络通常以星型拓扑结构布局，其中**网关**①在**终端设备**②和中央**网络服务器**之间中继消息，网络服务器将来自网络的各个设备的数据包路由到关联的应用服务器。为了确保无线传输的安全，LoRaWAN协议依赖于对称密码技术，使用从设备的根密钥派生的会话密钥。在后端设备根密钥的存储和相关的密钥派生操作由**入网服务器**保证。

本规范将网络服务器，应用服务器和入网服务器视为它们总是位于同一地方。 在多个不相交的网络节点上承载这些功能超出了本规范的范围，但由\[BACKEND\]涵盖。

网关通过安全的标准IP连接来连接到网络服务器，而终端设备使用单跳LoRa™或FSK通信到一个或多个网关③。所有通信通常都是双向的，尽管从终端设备到网络服务器的上行链路通信预计将成为主要的流量。

终端设备和网关之间的通信分布在不同的**频率信道**和**数据速率**上。数据速率的选择是通信范围和消息时长之间的平衡，以不同的数据速率进行通信不互相干扰。LoRa数据速率范围从0.3 kbps到50 kbps。 为了最大化终端设备的电池寿命和整体网络容量，LoRa网络基础设施可以通过**自适应数据速率**（ADR）方案单独管理每个终端设备的数据速率和射频（RF）输出。

只要遵守以下规则，终端设备可以随时使用任何可用数据速率在任何可用信道上传输：

* 终端设备为每次传输以伪随机方式更改信道。由此产生的频率多样性使得系统对干扰更健壮。
* 终端设备应遵守相对于所使用子频段和当地法规的最大传输占空比。
* 终端设备应遵守相对于所使用子频段和当地法规的最大传输持续时间（或停留时间）。

> 注意：每个子频带的最大传输占空比和停留时间是区域特定的，并在\[PHY\]中定义

①网关也被称为集中器或基站。

②终端设备也被称为motes。

③对中间元素 - 中继器的支持没有在文档中描述，但是在本规范中包含了对于封装开销的有效载荷限制。中继器被定义为使用LoRaWAN作为其回程机制。

## 1.1 LoRaWAN类

所有LoRaWAN设备必须至少实现本文档中描述的A类功能。此外，它们可以实现如本文档中所述的名为B类或C类的项，或其他定义的选项。在所有情况下，它们必须与A类保持一致。

## 1.2 约定

本文件中的“必须”，“不得”，“需要”，“应”，“不应”，“应该”，“不应该”，“推荐”，“可能”和“可选”，按照RFC 2119中的描述进行解释。

MAC命令被写如_**LinkCheckReq**_，位和位字段被写如**FRMPayload**，常量被写如RECEIVE\_DELAY1，变量被写如_N_。

在本文档中，

* 所有多字节字段的OTA字节顺序都是小端
* EUI是8个字节的多字节字段，并以小尾传输。
* 默认情况下，RFU位应由消息发送方设置为零，并应被接收方忽略

